{"version":3,"sources":["webpack:///src/components/Map.vue","webpack:///./src/components/Map.vue?36c9","webpack:///./src/components/Map.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1a2e","webpack:///./src/App.vue","webpack:///./src/store/store.js","webpack:///./src/main.js"],"names":["Map_heatmap","Map","data","imageUrl","window","floorPlanPath","mounted","_this","this","heatmap_default","a","create","container","$refs","heatmap","setData","max","x","y","value","radius","setInterval","$store","dispatch","computed","dataPoints","getters","newDataPoints","components_Map","render","_h","$createElement","_c","_self","ref","attrs","id","src","_v","directives","name","rawName","expression","_s","staticRenderFns","App","components","appMap","__webpack_require__","normalizeComponent","ssrContext","selectortype_template_index_0_src_App","src_App","App_normalizeComponent","Vue","use","Vuex","store","Store","strict","state","nodes","mutations","updateNodes","payload","actions","fetchCurrent","_ref","commit","jQuery","ajax","type","url","contentType","dataType","stringify_default","query","done","current","fail","console","log","map","node","temperature","width","height","title","config","productionTip","el","template"],"mappings":"+JAYAA,OAAA,EAEAC,GACAC,KADA,WAEA,OACAC,SAAAC,OAAAC,gBAGAC,QANA,WAMA,IAAAC,EAAAC,MACIR,EAAJS,EAAAC,EAAAC,QACAC,UAAAJ,KAAAK,MAAAC,WAKAC,SACAC,IAAA,EACAd,OAAAe,EAAA,IAAAC,EAAA,IAAAC,MAAA,EAAAC,OAAA,MAAAH,EAAA,IAAAC,EAAA,IAAAC,MAAA,EAAAC,OAAA,QAEAC,YAAA,WACAd,EAAAe,OAAAC,SAAA,iBACA,MAEAC,UACAC,WADA,WAQA,OANAzB,GACQA,EAARe,SACAC,IAAA,GACAd,KAAAM,KAAAc,OAAAI,QAAAC,gBAGAnB,KAAAc,OAAAI,QAAAC,iBCxCeC,GADEC,OAFjB,WAA0B,IAAaC,EAAbtB,KAAauB,eAA0BC,EAAvCxB,KAAuCyB,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,IAAA,UAAAC,OAAqBC,GAAA,SAAYJ,EAAA,OAAYG,OAAOE,IAApI7B,KAAoIL,YAApIK,KAAwJ8B,GAAA,KAAAN,EAAA,OAAwBO,aAAaC,KAAA,OAAAC,QAAA,SAAAtB,OAAA,EAAAuB,WAAA,aAA7LlC,KAA+P8B,GAAA,SAA/P9B,KAA+PmC,GAA/PnC,KAA+PiB,YAAA,aAExQmB,oBCCjB,ICMAC,GACAL,KAAA,MACAM,YACAC,ODTyBC,EAAQ,OAcjCC,CACEhD,EACA2B,GATF,EAVA,SAAAsB,GACEF,EAAQ,SAaV,kBAEA,MAUgC,UEvBjBG,GADEtB,OAFP,WAAgB,IAAaC,EAAbtB,KAAauB,eAA0BC,EAAvCxB,KAAuCyB,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBG,OAAOC,GAAA,SAAYJ,EAAA,gBAE7FY,oBCChC,IAuBeQ,EAvBUJ,EAAQ,OAcjBK,CACdR,EACAM,GAT6B,EAV/B,SAAoBD,GAClBF,EAAQ,SAaS,KAEU,MAUG,8DCtBhCM,IAAIC,IAAIC,KAEO,IAAAC,EAAA,IAAID,IAAKE,OACtBC,QAAQ,EACNC,OACA9C,QAAS,KACP+C,UAEFC,WACAC,YADW,SACCH,EAAOI,GACjBJ,EAAMC,MAAQG,IAGhBC,SACAC,aADS,SAAAC,EACgBH,GAAU,IAApBI,EAAoBD,EAApBC,OAEbC,IACGC,MACCC,KAAM,OACNC,IAAK,WACLC,YAAa,mBACbC,SAAU,OACVxE,KAAMyE,KAPKC,MAAS,+CASrBC,KAAK,SAACb,GACLI,EAAO,cAAeJ,EAAQ9D,KAAK4E,WAEpCC,KAAK,WACJC,QAAQC,IAAI,oBAIlBvD,SACAC,cAAe,SAACiC,GACd,OAAOA,EAAMC,MAAMqB,IAAI,SAACC,GACtB,OACE/C,GAAI+C,EAAK/C,GACPjB,MAAOgE,EAAKC,YACZnE,EAAGkE,EAAKlE,EAAIoD,IAAOjE,QAAQiF,QAC3BnE,EAAGiE,EAAKjE,EAAImD,IAAOjE,QAAQkF,SAC3BlE,OAAQ,IACRmE,MAAOJ,EAAKI,aCvCxBjC,IAAIkC,OAAOC,eAAgB,EAG3B,IAAInC,KACFG,QACAiC,GAAI,OACJ5C,YAAcD,OACd8C,SAAU","file":"assets/javascripts/app.js","sourcesContent":["<template>\n  <div id='map' ref=\"heatmap\">\n    <img :src=\"imageUrl\">\n    <div v-show=\"1 == 1\">\n      {{ dataPoints }}\n    </div>\n  </div>\n</template>\n\n<script>\n import h337 from 'heatmap.js';\n\n let heatmap\n\n export default {\n   data() {\n     return {\n       imageUrl: window.floorPlanPath\n     }\n   }\n   , mounted() {\n     heatmap = h337.create({\n       container: this.$refs.heatmap\n       /* , maxOpacity: 0.85\n        * , minOpacity: 0.25*/\n     })\n\n     heatmap.setData({\n       max: 5,\n       data: [{x:200, y:150, value: 3, radius: 200}, {x:210, y:200, value: 3, radius: 150}]\n     })\n     setInterval(() => {\n       this.$store.dispatch('fetchCurrent')\n     }, 4000)\n   }\n   , computed: {\n     dataPoints() {\n       if (heatmap) {\n         heatmap.setData({\n           max: 35,\n           data: this.$store.getters.newDataPoints\n         })\n       }\n       return this.$store.getters.newDataPoints\n     }\n   }\n }\n</script>\n\n<style scoped>\n #map {\n   padding: 20px;\n   width: 100%;\n   height: 100%;\n }\n\n #map img {\n   width: 100%;\n }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Map.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"heatmap\",attrs:{\"id\":\"map\"}},[_c('img',{attrs:{\"src\":_vm.imageUrl}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(1 == 1),expression:\"1 == 1\"}]},[_vm._v(\"\\n    \"+_vm._s(_vm.dataPoints)+\"\\n  \")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0f8062c8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Map.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0f8062c8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Map.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Map.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Map.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0f8062c8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Map.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0f8062c8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Map.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <app-map></app-map>\n  </div>\n</template>\n\n<script>\nimport Map from './components/Map'\n\nexport default {\n  name: 'App',\n  components: {\n    appMap: Map\n  }\n}\n</script>\n\n<style>\n#app {\n  height: 100vh;\n  width: 100vw;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('app-map')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6270999f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6270999f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6270999f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport jQuery from 'jquery'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  strict: true\n  , state: {\n    heatmap: null\n    , nodes: []\n  }\n  , mutations: {\n    updateNodes(state, payload) {\n      state.nodes = payload\n    }\n  }\n  , actions: {\n    fetchCurrent({ commit }, payload ) {\n      const data = { \"query\": \"{ current { id title temperature x y } }\" }\n      jQuery\n        .ajax({\n          type: 'POST',\n          url: '/graphql',\n          contentType: 'application/json',\n          dataType: 'json',\n          data: JSON.stringify(data)\n        })\n        .done((payload) => {\n          commit('updateNodes', payload.data.current)\n        })\n        .fail(() => {\n          console.log('fetch failed')\n        })\n    }\n  }\n  , getters: {\n    newDataPoints: (state) => {\n      return state.nodes.map((node) => {\n        return {\n          id: node.id\n          , value: node.temperature\n          , x: node.x * jQuery(window).width()\n          , y: node.y * jQuery(window).height()\n          , radius: 200\n          , title: node.title\n        }\n      })\n    }\n  }\n})\n\nfunction random(max) {\n  return Math.round(Math.random() * max)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/store.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport store from './store/store'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  store,\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}